'use strict';const e={'name':'cc_debuger_realtime','version':'1.0.9','package_version':0x2,'description':'Cocos\x20real-time\x20multi-function\x20debugger','author':'hyz','author-info':{'email':'1451784145@qq.com','WeChat':'busky192','QQ\x20Group':'581563429'},'type':'module','main':'./dist/browser.cjs','scripts':{'dev':'npm\x20run\x20build\x20--\x20--mode\x20development','build':'vite\x20build','obfuscate':'node\x20plugin-tools.js','clear':'node\x20plugin-tools.js\x20isClear','install_publish':'npm\x20install\x20--production','publish':'vite\x20build\x20&&\x20node\x20plugin-tools.js'},'dependencies':{'@dagrejs/dagre':'^1.1.4','@vue-flow/core':'^1.41.7','element-plus':'^2.8.6','fs-extra':'^11.2.0','mitt':'^3.0.1','pngjs':'^7.0.0','vue':'^3.4.37','ws':'^8.18.0'},'devDependencies':{'@cocos-fe/vite-plugin-cocos-panel':'^0.0.1-beta.5','@cocos/creator-types':'^3.8.4','@types/node':'^22.10.5','@vitejs/plugin-vue':'^5.2.1','javascript-obfuscator':'^4.1.1','rollup-plugin-node-externals':'^7.1.3','terser':'^5.39.0','typescript':'^5.5.3','unplugin-auto-import':'^0.18.6','unplugin-vue-components':'^0.27.5','vite':'^5.4.1','vite-plugin-obfuscator':'^1.0.5','vue-tsc':'^2.1.10','archiver':'^7.0.1'},'contributions':{'builder':'./builder/builder.js','menu':[{'path':'i18n:menu.extension','label':'i18n:cc_debuger_realtime.menu_main','message':'open_main'}],'messages':{'open_main':{'methods':['open_main']},'restart-self':{'methods':['restart_self_ui']},'doEvalJs':{'methods':['default.doEvalJs']},'sendRuntimeLog':{'methods':['log_panel.sendRuntimeLog']},'callMainPanelFunc':{'methods':['default.callMainPanelFunc']},'onRuntimeOnlineState':{'methods':['log_panel.onRuntimeOnlineState','eval_panel.onRuntimeOnlineState','localCache_panel.onRuntimeOnlineState','dynamicTexture_panel.onRuntimeOnlineState']},'onBeforeBuild':{'methods':['onBeforeBuild']},'onAfterBuild':{'methods':['onAfterBuild']},'setDefaultEvalStr':{'methods':['eval_panel.setDefaultEvalStr']}}},'panels':{'default':{'main':'./dist/main_panel.cjs','size':{'min-width':0x258,'min-height':0x258,'width':0x3e8,'height':0x352}},'eval_panel':{'main':'./dist/eval_panel.cjs','size':{'min-width':0x320,'min-height':0x258,'width':0x4b0,'height':0x258}},'log_panel':{'main':'./dist/log_panel.cjs','size':{'min-width':0x190,'min-height':0x12c,'width':0x320,'height':0x258}},'dynamicTexture_panel':{'main':'./dist/dynamicTexture_panel.cjs','size':{'min-width':0x320,'min-height':0x320,'width':0x320,'height':0x320}},'localCache_panel':{'main':'./dist/localCache_panel.cjs','size':{'min-width':0x190,'min-height':0x1f4,'width':0x294,'height':0x320}}}},t=require('path'),n=require('net'),{exec:o,spawn:r}=require('child_process'),i=require('fs-extra'),s=require('os');exports['_funcs']=void 0x0,(_0x53f350=>{function _0xc46011(){return e['name'];}function _0x57d79d(){return t['join'](Editor['Project']['path'],'extensions',e['name']);}_0x53f350['getPluginName']=_0xc46011,_0x53f350['getPluginVersionName']=function(){const _0x20d148=_0x57d79d()+'/version.txt';let _0x3cffdc=i['readFileSync'](_0x20d148);if(_0x3cffdc['toString']&&(_0x3cffdc=_0x3cffdc['toString']()),'string'==typeof _0x3cffdc)_0x3cffdc=_0x3cffdc['trim'](),/^\d+(\.\d+)*$/['test'](_0x3cffdc)||(_0x3cffdc=e['version']);else _0x3cffdc=e['version'];return _0x3cffdc;},_0x53f350['getAssetInfoByUuid']=async function(_0xec2f69){return Editor['Message']['request']('asset-db','query-asset-info',_0xec2f69);},_0x53f350['getAssetMetaByUuid']=async function(_0x2b1d76){return Editor['Message']['request']('asset-db','query-asset-meta',_0x2b1d76);},_0x53f350['getUuidByUrl']=async function(_0x15088e){return Editor['Message']['request']('asset-db','query-uuid',_0x15088e);},_0x53f350['log_1']=function(..._0xe230e8){_0xe230e8['unshift']('[plugin]'),console['log']['apply'](console,_0xe230e8);},_0x53f350['getCurPluginPath']=_0x57d79d,_0x53f350['waitForSeconds']=async function(_0x2b2020){return new Promise(_0x3a7b01=>{setTimeout(()=>{_0x3a7b01(null);},0x3e8*_0x2b2020);});},_0x53f350['getAllSubpathsFromUrl']=function(_0xcdbf1a){const _0x304f33=_0xcdbf1a['replace'](/^[^:]+:\/+/,'')['split']('/'),_0x4161e7=[];let _0x328173='';for(let _0x4ff01c=0x0;_0x4ff01c<_0x304f33['length'];_0x4ff01c++)_0x328173=(_0x328173?_0x328173+'/':'')+_0x304f33[_0x4ff01c],_0x4161e7['push'](_0x328173);return _0x4161e7;},_0x53f350['getIconOfResType']=function(_0x5e9b4d){return'cc.SpriteFrame'===_0x5e9b4d||'cc.Texture2D'===_0x5e9b4d||'cc.ImageAsset'===_0x5e9b4d?'image':'cc.Prefab'===_0x5e9b4d?'prefab':'cc.SceneAsset'===_0x5e9b4d?'scene':'cc.Material'===_0x5e9b4d?'material':'cc.EffectAsset'===_0x5e9b4d?'effect':'cc.AudioClip'===_0x5e9b4d?'audio-clip':'cc.AnimationClip'===_0x5e9b4d?'animation-clip':'cc.JsonAsset'===_0x5e9b4d?'json':'cc.TextAsset'===_0x5e9b4d?'text':'cc.BitmapFont'===_0x5e9b4d?'bitmap-font':'cc.TTFFont'===_0x5e9b4d?'ttf-font':'cc.ParticleAsset'===_0x5e9b4d?'particle':'cc.SpriteAtlas'===_0x5e9b4d?'sprite-atlas':'cc.VideoClip'===_0x5e9b4d?'video':'cc.Mesh'===_0x5e9b4d?'mesh':'sp.SkeletonData'===_0x5e9b4d?'spine-data':'cc.AnimationClip'===_0x5e9b4d?'animation-clip':'unknown';},_0x53f350['getRuntimePreviewUrl']=async function(){return'http://localhost:'+await new Promise(_0x4aee67=>{Editor['Message']['request']('server','query-port')['then'](_0x1959be=>{_0x4aee67(_0x1959be);});})+'/';},_0x53f350['openWebSiteUrl']=function(_0x451645){let _0x582fcc;switch(s['platform']()){case'win32':_0x582fcc='start\x20\x22\x22\x20\x22'+_0x451645+'\x22';break;case'darwin':_0x582fcc='open\x20\x22'+_0x451645+'\x22';break;case'linux':_0x582fcc='xdg-open\x20\x22'+_0x451645+'\x22';break;default:return void console['error']('Unsupported\x20platform:\x20'+s['platform']());}o(_0x582fcc,(_0x314dec,_0x4db465,_0xed0162)=>{_0x314dec?console['error']('执行命令时出错:\x20'+_0x314dec):_0xed0162&&console['error']('标准错误输出:\x20'+_0xed0162);});},_0x53f350['waitForElementMounted']=async function(_0x1729f8,_0x47fdad=0x64,_0x4ea620=0x32){return _0x1729f8['value']?_0x1729f8['value']:new Promise(function(_0x4079fc,_0x298926){let _0x5c8ec8=0x0;const _0x2aa648=setInterval(()=>{_0x1729f8['value']?(_0x4079fc(_0x1729f8['value']),clearInterval(_0x2aa648)):_0x5c8ec8>=_0x4ea620?clearInterval(_0x2aa648):_0x5c8ec8++;},_0x47fdad);});},_0x53f350['clamp']=function(_0x3c5e91,_0x5c1899,_0x513abc){if(_0x3c5e91>_0x5c1899)throw new Error('min\x20should\x20be\x20less\x20than\x20or\x20equal\x20to\x20max');return Math['min'](Math['max'](_0x513abc,_0x3c5e91),_0x5c1899);};const _0x2b535c=[];async function _0x460143(_0xdb602){try{return await i['ensureDir'](_0xdb602),_0xdb602;}catch(_0x2a3afd){return console['error']('操作文件夹时出错:\x20'+_0x2a3afd['message']),null;}}async function _0x4ae62e(){const _0x2ec410=_0x57d79d()+'/cache',_0x5c20a2=_0x2ec410+'/localServer.json';return await _0x460143(_0x2ec410),_0x5c20a2;}_0x53f350['runCmdSpawn']=function(_0x581cf6,_0x5a577e,_0xff5e44){return new Promise((_0x146418,_0x59d885)=>{const _0x3baad2=r(_0x581cf6,_0x5a577e,{'shell':!0x0,..._0xff5e44});_0x2b535c['push'](_0x3baad2),_0x3baad2['stdout']['on']('data',_0x3c1cd6=>{console['log']('[runCmdSpawn]:\x20'+_0x3c1cd6['toString']()['trim']());}),_0x3baad2['stderr']['on']('data',_0x42e1c7=>{console['error']('[runCmdSpawn\x20Error]:\x20'+_0x42e1c7['toString']()['trim']());}),_0x3baad2['on']('error',_0x2b72e8=>{console['error']('[runCmdSpawn\x20Error]',_0x2b72e8),_0x146418();}),_0x3baad2['on']('exit',_0x2df545=>{_0x2b535c['splice'](_0x2b535c['indexOf'](_0x3baad2),0x1),console['log']('[runCmdSpawn]\x20Process\x20exited\x20with\x20code\x20'+_0x2df545),_0x146418();});});},_0x53f350['stopSpawnProcess']=function(){for(let _0x377036 of _0x2b535c)_0x377036['kill']();_0x2b535c['length']=0x0;},_0x53f350['rgbaToHex']=function(_0x48fc02,_0x348798,_0xd41063,_0x33c7a5){const _0x3adc31=_0xd351b3=>{const _0x426e99=_0xd351b3['toString'](0x10);return 0x1===_0x426e99['length']?'0'+_0x426e99:_0x426e99;};return'#'+_0x3adc31(_0x48fc02)+_0x3adc31(_0x348798)+_0x3adc31(_0xd41063)+_0x3adc31(_0x33c7a5);},_0x53f350['findAvailablePort']=function _0x3bc3ac(_0x42fe48){return new Promise((_0x29bfda,_0x3a4f63)=>{const _0x538236=n['createServer']();_0x538236['unref'](),_0x538236['on']('error',()=>{_0x29bfda(_0x3bc3ac(_0x42fe48+0x1));}),_0x538236['listen'](_0x42fe48,()=>{const _0xef0e9=_0x538236['address']()['port'];_0x538236['close'](()=>_0x29bfda(_0xef0e9));});});},_0x53f350['roundNumbersToPrecision']=function _0x1d0908(_0xc8cc85,_0x3e5356=0x2){return null===_0xc8cc85||'object'!=typeof _0xc8cc85?'number'==typeof _0xc8cc85?Number(_0xc8cc85['toFixed'](_0x3e5356)):_0xc8cc85:Array['isArray'](_0xc8cc85)?_0xc8cc85['map'](_0x3118ad=>_0x1d0908(_0x3118ad,_0x3e5356)):Object['keys'](_0xc8cc85)['reduce']((_0x93899f,_0x2a5317)=>{const _0xc189c4=_0xc8cc85[_0x2a5317];return _0x93899f[_0x2a5317]='number'==typeof _0xc189c4?Number(_0xc189c4['toFixed'](_0x3e5356)):'object'==typeof _0xc189c4&&null!==_0xc189c4?_0x1d0908(_0xc189c4,_0x3e5356):_0xc189c4,_0x93899f;},{});},_0x53f350['checkMouseIsInElemen']=function(_0x33e232,_0x5336d8){const _0x5ced6f=_0x33e232['getBoundingClientRect']();return _0x5336d8['clientX']>_0x5ced6f['x']&&_0x5336d8['clientX']<_0x5ced6f['x']+_0x5ced6f['width']&&_0x5336d8['clientY']>_0x5ced6f['y']&&_0x5336d8['clientY']<_0x5ced6f['y']+_0x5ced6f['height'];},_0x53f350['registerF5']=function(){window['addEventListener']('keyup',_0x758db8=>{'F5'==_0x758db8['key']&&Editor['Message']['send'](_0x53f350['getPluginName'](),'restart-self');});},_0x53f350['isValidURL']=function(_0x305ddd){return new RegExp('^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\x5cS+(?::\x5cS*)?@)?(?:(?:(?:[1-9]\x5cd?|1\x5cd\x5cd|2[01]\x5cd|22[0-3])(?:\x5c.(?:1?\x5cd{1,2}|2[0-4]\x5cd|25[0-5])){2}(?:\x5c.(?:[0-9]\x5cd?|1\x5cd\x5cd|2[0-4]\x5cd|25[0-4]))|(?:(?:[a-z\x5cu00a1-\x5cuffff0-9]+-?)*[a-z\x5cu00a1-\x5cuffff0-9]+)(?:\x5c.(?:[a-z\x5cu00a1-\x5cuffff0-9]+-?)*[a-z\x5cu00a1-\x5cuffff0-9]+)*(?:\x5c.(?:[a-z\x5cu00a1-\x5cuffff]{2,})))|localhost)(?::\x5cd{2,5})?(?:(/|\x5c?|#)[^\x5cs]*)?$','i')['test'](_0x305ddd);},_0x53f350['ensureFloderExist']=_0x460143,_0x53f350['getLocalIpv4IP']=function(){const _0x49ef0c=s['networkInterfaces']();for(const _0xf196d0 in _0x49ef0c){const _0xa6b609=_0x49ef0c[_0xf196d0];for(const _0x2c39b6 of _0xa6b609)if('IPv4'===_0x2c39b6['family']&&!_0x2c39b6['internal'])return _0x2c39b6['address'];}return'未找到\x20IP\x20地址';},_0x53f350['getLocalIPs']=function(){const _0x55e906=s['networkInterfaces'](),_0xc77d70=[];for(const _0x3dc01b of Object['keys'](_0x55e906))for(const _0x523454 of _0x55e906[_0x3dc01b])'IPv4'!==_0x523454['family']||_0x523454['internal']||_0xc77d70['push'](_0x523454['address']),'IPv6'!==_0x523454['family']||_0x523454['internal']||_0xc77d70['push'](_0x523454['address']);return _0xc77d70;},_0x53f350['checkIpIsLocalhost']=function(_0x4fa9d7){const _0xe13b84=_0x53f350['getLocalIPs']();return!('localhost'!=_0x4fa9d7&&'::1'!=_0x4fa9d7&&'127.0.0.1'!=_0x4fa9d7&&!_0xe13b84['includes'](_0x4fa9d7));},_0x53f350['getFs']=function(){return i;},_0x53f350['getLocalServerJsonPath']=_0x4ae62e,_0x53f350['saveCustomServerAddress']=async function(_0x4b4ea5){const _0x32ab5c=await _0x4ae62e();let _0x3c90db=null;try{_0x3c90db=i['readJSONSync'](_0x32ab5c);}catch(_0x3d449e){}_0x3c90db={'ip':null==_0x3c90db?void 0x0:_0x3c90db['ip'],'port':null==_0x3c90db?void 0x0:_0x3c90db['port'],'ws':_0x4b4ea5},_0x3c90db['ip']||delete _0x3c90db['ip'],_0x3c90db['port']||delete _0x3c90db['port'],i['writeFileSync'](_0x32ab5c,JSON['stringify'](_0x3c90db,null,0x4));};let _0x2d3cca=0x0;function _0x117158(_0x4a7a71,_0x5bc156){const _0x392d68=new Uint8Array(_0x4a7a71['length']);for(let _0x122d6e=0x0;_0x122d6e<_0x4a7a71['length'];_0x122d6e++)_0x392d68[_0x122d6e]=_0x4a7a71[_0x122d6e]^_0x5bc156[_0x122d6e%_0x5bc156['length']];return _0x392d68;}_0x53f350['printTime']=function(_0x1ca88c,..._0x39df78){let _0x5b5ddb=Date['now']();0x0==_0x2d3cca||console['log'](_0x1ca88c,_0x5b5ddb-_0x2d3cca,..._0x39df78),_0x2d3cca=_0x5b5ddb;},_0x53f350['getI18nText']=function(_0x532b4d){_0x532b4d=_0xc46011()+'.'+_0x532b4d;let _0x38ce49=Editor['I18n']['t'](_0x532b4d);return''==_0x38ce49&&_0x53f350['log_1']('i18n.'+_0x532b4d+'为空'),_0x38ce49;},_0x53f350['formatStr']=function(_0x379a09,..._0x3feaeb){return _0x379a09['replace'](/\{(\d+)\}/g,function(_0x571b15,_0x53fa95){return void 0x0!==_0x3feaeb[_0x53fa95]?_0x3feaeb[_0x53fa95]:_0x571b15;});},_0x53f350['formatDate']=function(_0x49c18e,_0x285f1a){let _0x1c5b32=new Date();null!=_0x285f1a&&_0x1c5b32['setTime'](_0x285f1a);var _0x39a889={'M+':_0x1c5b32['getMonth']()+0x1,'d+':_0x1c5b32['getDate'](),'h+':_0x1c5b32['getHours'](),'m+':_0x1c5b32['getMinutes'](),'s+':_0x1c5b32['getSeconds'](),'q+':Math['floor']((_0x1c5b32['getMonth']()+0x3)/0x3),'S':_0x1c5b32['getMilliseconds']()};for(var _0x48bc2c in(/(y+)/['test'](_0x49c18e)&&(_0x49c18e=_0x49c18e['replace'](RegExp['$1'],(_0x1c5b32['getFullYear']()+'')['substr'](0x4-RegExp['$1']['length']))),_0x39a889))new RegExp('('+_0x48bc2c+')')['test'](_0x49c18e)&&(_0x49c18e=_0x49c18e['replace'](RegExp['$1'],0x1==RegExp['$1']['length']?_0x39a889[_0x48bc2c]:('00'+_0x39a889[_0x48bc2c])['substr']((''+_0x39a889[_0x48bc2c])['length'])));return _0x49c18e;},_0x53f350['openEvalPanel']=async function(_0x1677e5=''){const _0x187177=_0x53f350['getPluginName']()+'.eval_panel';await Editor['Panel']['has'](_0x187177)?Editor['Panel']['focus'](_0x187177):await Editor['Panel']['open'](_0x187177),_0x1677e5&&Editor['Message']['request'](_0x53f350['getPluginName'](),'setDefaultEvalStr',_0x1677e5);},_0x53f350['parseKey']=function(_0x461bc0){let _0x5772ac='';for(let _0x5a62a6=0x0;_0x5a62a6<_0x461bc0['length'];_0x5a62a6++){let _0x37c086=_0x461bc0[_0x5a62a6]['toString'](),_0x535731='';for(let _0x25c356=0x0;_0x25c356<_0x37c086['length'];_0x25c356++)_0x535731+=(0x9-parseInt(_0x37c086['charAt'](_0x25c356)))['toString']();_0x5772ac+=parseInt(_0x535731)['toString'](0x10)['padStart'](0x8,'0');}return _0x5772ac;},_0x53f350['str_encrypt']=function(_0x313d22,_0x5c605a){if(null==_0x5c605a)return void console['log']('key\x20不能为空');const _0x1161b1=_0x117158(new TextEncoder()['encode'](_0x313d22),new TextEncoder()['encode'](_0x5c605a));let _0x2092d5='';for(let _0x490d0e=0x0;_0x490d0e<_0x1161b1['length'];_0x490d0e+=0x8000){const _0x123262=_0x1161b1['subarray'](_0x490d0e,_0x490d0e+0x8000);_0x2092d5+=String['fromCharCode']['apply'](null,Array['from'](_0x123262));}return btoa(_0x2092d5);},_0x53f350['str_decrypt']=function(_0x351639,_0xec5285){if(null==_0xec5285)return void console['log']('key\x20不能为空');const _0x40eae2=atob(_0x351639),_0x443419=new Uint8Array(_0x40eae2['length']);for(let _0x3f674b=0x0;_0x3f674b<_0x40eae2['length'];_0x3f674b+=0x8000){const _0x58a104=_0x40eae2['slice'](_0x3f674b,_0x3f674b+0x8000);for(let _0x57dfe8=0x0;_0x57dfe8<_0x58a104['length'];_0x57dfe8++)_0x443419[_0x3f674b+_0x57dfe8]=_0x58a104['charCodeAt'](_0x57dfe8);}const _0x5ac4c3=_0x117158(_0x443419,new TextEncoder()['encode'](_0xec5285));return new TextDecoder()['decode'](_0x5ac4c3);},_0x53f350['pako_deflate']=function(_0x40c466){return pako['deflate'](_0x40c466,{'to':'string'});},_0x53f350['pako_inflate']=function(_0x484eea){return pako['inflate'](_0x484eea,{'to':'string'});},_0x53f350['getStaticsInfo']=async function(){const _0x46ebd4=Editor['Project']['path'];console['log']('pPath',_0x46ebd4),console['log']('Editor.Project.tmpDir',Editor['Project']['tmpDir']);const _0x3a7bd0=t['join'](Editor['Project']['path'],'settings/v2/packages/project.json'),_0x100267=i['readJSONSync'](_0x3a7bd0);if(console['log']('projJson',_0x100267),null==this['_designSize']){const _0x1d61b8='const\x20{width,height}\x20=\x20cc.view.getDesignResolutionSize();return\x20{width,height}',_0x4c0adf=await this['evalJsInRuntime'](_0x1d61b8);console['log']('执行',_0x4c0adf);}},_0x53f350['getDesignResolutionSize']=function(){var _0x5e62da,_0x406227;const _0x3c498b=t['join'](Editor['Project']['path'],'settings/v2/packages/project.json');if(i['existsSync'](_0x3c498b))try{const _0x117e90=i['readJSONSync'](_0x3c498b);if(null==(_0x5e62da=null==_0x117e90?void 0x0:_0x117e90['general'])?void 0x0:_0x5e62da['designResolution'])return null==(_0x406227=null==_0x117e90?void 0x0:_0x117e90['general'])?void 0x0:_0x406227['designResolution'];}catch(_0x505d15){}return null;};})(exports['_funcs']||(exports['_funcs']={})),(function(){if(null!=globalThis['pako'])return;let _0x507dd6=t['join'](exports['_funcs']['getCurPluginPath'](),'src/tools/','pako.min.js'),_0x4e34ca=i['readFileSync'](_0x507dd6,'utf-8');try{new Function(_0x4e34ca)();}catch(_0x485bcc){console['log'](_0x485bcc);}}()),exports['packageJSON']=e;