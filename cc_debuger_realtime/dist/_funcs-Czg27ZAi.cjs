'use strict';const e={'name':'cc_debuger_realtime','version':'1.0.6','package_version':0x2,'description':'Cocos\x20real-time\x20multi-function\x20debugger','author':'hyz','author-info':{'email':'1451784145@qq.com','WeChat':'busky192','QQ\x20Group':'581563429'},'type':'module','main':'./dist/browser.cjs','scripts':{'dev':'npm\x20run\x20build\x20--\x20--mode\x20development','build':'vite\x20build','obfuscate':'node\x20plugin-tools.js','clear':'node\x20plugin-tools.js\x20isClear','install_publish':'npm\x20install\x20--production','publish':'vite\x20build\x20&&\x20node\x20plugin-tools.js'},'dependencies':{'@dagrejs/dagre':'^1.1.4','@vue-flow/core':'^1.41.7','element-plus':'^2.8.6','fs-extra':'^11.2.0','mitt':'^3.0.1','pngjs':'^7.0.0','vue':'^3.4.37','ws':'^8.18.0'},'devDependencies':{'@cocos-fe/vite-plugin-cocos-panel':'^0.0.1-beta.5','@cocos/creator-types':'^3.8.4','@types/node':'^22.10.5','@vitejs/plugin-vue':'^5.2.1','javascript-obfuscator':'^4.1.1','rollup-plugin-node-externals':'^7.1.3','terser':'^5.39.0','typescript':'^5.5.3','unplugin-auto-import':'^0.18.6','unplugin-vue-components':'^0.27.5','vite':'^5.4.1','vite-plugin-obfuscator':'^1.0.5','vue-tsc':'^2.1.10','archiver':'^7.0.1'},'contributions':{'builder':'./builder/builder.js','menu':[{'path':'i18n:menu.extension','label':'i18n:cc_debuger_realtime.menu_main','message':'open_main'}],'messages':{'open_main':{'methods':['open_main']},'restart-self':{'methods':['restart_self_ui']},'doEvalJs':{'methods':['default.doEvalJs']},'sendRuntimeLog':{'methods':['log_panel.sendRuntimeLog']},'callMainPanelFunc':{'methods':['default.callMainPanelFunc']},'onRuntimeOnlineState':{'methods':['log_panel.onRuntimeOnlineState','eval_panel.onRuntimeOnlineState','localCache_panel.onRuntimeOnlineState','dynamicTexture_panel.onRuntimeOnlineState']},'onBeforeBuild':{'methods':['onBeforeBuild']},'onAfterBuild':{'methods':['onAfterBuild']},'setDefaultEvalStr':{'methods':['eval_panel.setDefaultEvalStr']}}},'panels':{'default':{'main':'./dist/main_panel.cjs','size':{'min-width':0x258,'min-height':0x258,'width':0x3e8,'height':0x352}},'eval_panel':{'main':'./dist/eval_panel.cjs','size':{'min-width':0x320,'min-height':0x258,'width':0x4b0,'height':0x258}},'log_panel':{'main':'./dist/log_panel.cjs','size':{'min-width':0x190,'min-height':0x12c,'width':0x320,'height':0x258}},'dynamicTexture_panel':{'main':'./dist/dynamicTexture_panel.cjs','size':{'min-width':0x320,'min-height':0x320,'width':0x320,'height':0x320}},'localCache_panel':{'main':'./dist/localCache_panel.cjs','size':{'min-width':0x190,'min-height':0x1f4,'width':0x294,'height':0x320}}}},t=require('path'),n=require('net'),{exec:o,spawn:r}=require('child_process'),i=require('fs-extra'),s=require('os');exports['_funcs']=void 0x0,(_0x3f095f=>{function _0xeb9848(){return e['name'];}function _0x1b549a(){return t['join'](Editor['Project']['path'],'extensions',e['name']);}_0x3f095f['getPluginName']=_0xeb9848,_0x3f095f['getPluginVersionName']=function(){return e['version'];},_0x3f095f['getPluginVersionNumber']=function(){return e['package_version'];},_0x3f095f['getAssetInfoByUuid']=async function(_0x3506e1){return Editor['Message']['request']('asset-db','query-asset-info',_0x3506e1);},_0x3f095f['getAssetMetaByUuid']=async function(_0x45bfb4){return Editor['Message']['request']('asset-db','query-asset-meta',_0x45bfb4);},_0x3f095f['getUuidByUrl']=async function(_0x2c8524){return Editor['Message']['request']('asset-db','query-uuid',_0x2c8524);},_0x3f095f['log_1']=function(..._0x258e6e){_0x258e6e['unshift']('[plugin]'),console['log']['apply'](console,_0x258e6e);},_0x3f095f['getCurPluginPath']=_0x1b549a,_0x3f095f['waitForSeconds']=async function(_0x96afe7){return new Promise(_0x51fbc6=>{setTimeout(()=>{_0x51fbc6(null);},0x3e8*_0x96afe7);});},_0x3f095f['getAllSubpathsFromUrl']=function(_0x387ab0){const _0x4f4346=_0x387ab0['replace'](/^[^:]+:\/+/,'')['split']('/'),_0x3938ef=[];let _0x3aaaed='';for(let _0x4c5fd7=0x0;_0x4c5fd7<_0x4f4346['length'];_0x4c5fd7++)_0x3aaaed=(_0x3aaaed?_0x3aaaed+'/':'')+_0x4f4346[_0x4c5fd7],_0x3938ef['push'](_0x3aaaed);return _0x3938ef;},_0x3f095f['getIconOfResType']=function(_0x3888a2){return'cc.SpriteFrame'===_0x3888a2||'cc.Texture2D'===_0x3888a2||'cc.ImageAsset'===_0x3888a2?'image':'cc.Prefab'===_0x3888a2?'prefab':'cc.SceneAsset'===_0x3888a2?'scene':'cc.Material'===_0x3888a2?'material':'cc.EffectAsset'===_0x3888a2?'effect':'cc.AudioClip'===_0x3888a2?'audio-clip':'cc.AnimationClip'===_0x3888a2?'animation-clip':'cc.JsonAsset'===_0x3888a2?'json':'cc.TextAsset'===_0x3888a2?'text':'cc.BitmapFont'===_0x3888a2?'bitmap-font':'cc.TTFFont'===_0x3888a2?'ttf-font':'cc.ParticleAsset'===_0x3888a2?'particle':'cc.SpriteAtlas'===_0x3888a2?'sprite-atlas':'cc.VideoClip'===_0x3888a2?'video':'cc.Mesh'===_0x3888a2?'mesh':'sp.SkeletonData'===_0x3888a2?'spine-data':'cc.AnimationClip'===_0x3888a2?'animation-clip':'unknown';},_0x3f095f['getRuntimePreviewUrl']=async function(){return'http://localhost:'+await new Promise(_0x4f3696=>{Editor['Message']['request']('server','query-port')['then'](_0x42aae9=>{_0x4f3696(_0x42aae9);});})+'/';},_0x3f095f['openWebSiteUrl']=function(_0x5eecc9){let _0x3bdbd3;switch(s['platform']()){case'win32':_0x3bdbd3='start\x20\x22\x22\x20\x22'+_0x5eecc9+'\x22';break;case'darwin':_0x3bdbd3='open\x20\x22'+_0x5eecc9+'\x22';break;case'linux':_0x3bdbd3='xdg-open\x20\x22'+_0x5eecc9+'\x22';break;default:return void console['error']('Unsupported\x20platform:\x20'+s['platform']());}o(_0x3bdbd3,(_0x33e12b,_0x320a07,_0x213aa0)=>{_0x33e12b?console['error']('执行命令时出错:\x20'+_0x33e12b):_0x213aa0&&console['error']('标准错误输出:\x20'+_0x213aa0);});},_0x3f095f['waitForElementMounted']=async function(_0x1e7e4d,_0x37cf84=0x64,_0x4e3651=0x32){return _0x1e7e4d['value']?_0x1e7e4d['value']:new Promise(function(_0x525a41,_0x361734){let _0x2768bf=0x0;const _0x285fe3=setInterval(()=>{_0x1e7e4d['value']?(_0x525a41(_0x1e7e4d['value']),clearInterval(_0x285fe3)):_0x2768bf>=_0x4e3651?clearInterval(_0x285fe3):_0x2768bf++;},_0x37cf84);});},_0x3f095f['clamp']=function(_0x58a00d,_0x2fd17e,_0x491926){if(_0x58a00d>_0x2fd17e)throw new Error('min\x20should\x20be\x20less\x20than\x20or\x20equal\x20to\x20max');return Math['min'](Math['max'](_0x491926,_0x58a00d),_0x2fd17e);};const _0x42b4ae=[];async function _0x50d07b(_0x28df4e){try{return await i['ensureDir'](_0x28df4e),_0x28df4e;}catch(_0x34326c){return console['error']('操作文件夹时出错:\x20'+_0x34326c['message']),null;}}async function _0x26849b(){const _0x52a823=_0x1b549a()+'/cache',_0x57384d=_0x52a823+'/localServer.json';return await _0x50d07b(_0x52a823),_0x57384d;}_0x3f095f['runCmdSpawn']=function(_0x254b31,_0x541915,_0x22c186){return new Promise((_0x5205ed,_0x40c495)=>{const _0x54dad6=r(_0x254b31,_0x541915,{'shell':!0x0,..._0x22c186});_0x42b4ae['push'](_0x54dad6),_0x54dad6['stdout']['on']('data',_0x80c7d1=>{console['log']('[runCmdSpawn]:\x20'+_0x80c7d1['toString']()['trim']());}),_0x54dad6['stderr']['on']('data',_0x2ba3bd=>{console['error']('[runCmdSpawn\x20Error]:\x20'+_0x2ba3bd['toString']()['trim']());}),_0x54dad6['on']('error',_0x5c2990=>{console['error']('[runCmdSpawn\x20Error]',_0x5c2990),_0x5205ed();}),_0x54dad6['on']('exit',_0x59336=>{_0x42b4ae['splice'](_0x42b4ae['indexOf'](_0x54dad6),0x1),console['log']('[runCmdSpawn]\x20Process\x20exited\x20with\x20code\x20'+_0x59336),_0x5205ed();});});},_0x3f095f['stopSpawnProcess']=function(){for(let _0x2d5895 of _0x42b4ae)_0x2d5895['kill']();_0x42b4ae['length']=0x0;},_0x3f095f['rgbaToHex']=function(_0x2ac83b,_0x4d55bd,_0x2b14a1,_0x1cd003){const _0x2ae649=_0x3b4232=>{const _0x242d48=_0x3b4232['toString'](0x10);return 0x1===_0x242d48['length']?'0'+_0x242d48:_0x242d48;};return'#'+_0x2ae649(_0x2ac83b)+_0x2ae649(_0x4d55bd)+_0x2ae649(_0x2b14a1)+_0x2ae649(_0x1cd003);},_0x3f095f['findAvailablePort']=function _0x4be7fb(_0x252e0c){return new Promise((_0xcff2a9,_0x3dac25)=>{const _0x228409=n['createServer']();_0x228409['unref'](),_0x228409['on']('error',()=>{_0xcff2a9(_0x4be7fb(_0x252e0c+0x1));}),_0x228409['listen'](_0x252e0c,()=>{const _0x33f6ec=_0x228409['address']()['port'];_0x228409['close'](()=>_0xcff2a9(_0x33f6ec));});});},_0x3f095f['roundNumbersToPrecision']=function _0x5f5517(_0x493ec1,_0xe68053=0x2){return null===_0x493ec1||'object'!=typeof _0x493ec1?'number'==typeof _0x493ec1?Number(_0x493ec1['toFixed'](_0xe68053)):_0x493ec1:Array['isArray'](_0x493ec1)?_0x493ec1['map'](_0x726e34=>_0x5f5517(_0x726e34,_0xe68053)):Object['keys'](_0x493ec1)['reduce']((_0x48c363,_0xfe4051)=>{const _0x39e821=_0x493ec1[_0xfe4051];return _0x48c363[_0xfe4051]='number'==typeof _0x39e821?Number(_0x39e821['toFixed'](_0xe68053)):'object'==typeof _0x39e821&&null!==_0x39e821?_0x5f5517(_0x39e821,_0xe68053):_0x39e821,_0x48c363;},{});},_0x3f095f['checkMouseIsInElemen']=function(_0x1b424c,_0x13a509){const _0x4b0f7e=_0x1b424c['getBoundingClientRect']();return _0x13a509['clientX']>_0x4b0f7e['x']&&_0x13a509['clientX']<_0x4b0f7e['x']+_0x4b0f7e['width']&&_0x13a509['clientY']>_0x4b0f7e['y']&&_0x13a509['clientY']<_0x4b0f7e['y']+_0x4b0f7e['height'];},_0x3f095f['registerF5']=function(){window['addEventListener']('keyup',_0xc454e8=>{'F5'==_0xc454e8['key']&&Editor['Message']['send'](_0x3f095f['getPluginName'](),'restart-self');});},_0x3f095f['isValidURL']=function(_0x4d66d8){return new RegExp('^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\x5cS+(?::\x5cS*)?@)?(?:(?:(?:[1-9]\x5cd?|1\x5cd\x5cd|2[01]\x5cd|22[0-3])(?:\x5c.(?:1?\x5cd{1,2}|2[0-4]\x5cd|25[0-5])){2}(?:\x5c.(?:[0-9]\x5cd?|1\x5cd\x5cd|2[0-4]\x5cd|25[0-4]))|(?:(?:[a-z\x5cu00a1-\x5cuffff0-9]+-?)*[a-z\x5cu00a1-\x5cuffff0-9]+)(?:\x5c.(?:[a-z\x5cu00a1-\x5cuffff0-9]+-?)*[a-z\x5cu00a1-\x5cuffff0-9]+)*(?:\x5c.(?:[a-z\x5cu00a1-\x5cuffff]{2,})))|localhost)(?::\x5cd{2,5})?(?:(/|\x5c?|#)[^\x5cs]*)?$','i')['test'](_0x4d66d8);},_0x3f095f['ensureFloderExist']=_0x50d07b,_0x3f095f['getLocalIpv4IP']=function(){const _0x5ddde7=s['networkInterfaces']();for(const _0xe0be9b in _0x5ddde7){const _0x33cabf=_0x5ddde7[_0xe0be9b];for(const _0xed3b9a of _0x33cabf)if('IPv4'===_0xed3b9a['family']&&!_0xed3b9a['internal'])return _0xed3b9a['address'];}return'未找到\x20IP\x20地址';},_0x3f095f['getLocalIPs']=function(){const _0x51db1e=s['networkInterfaces'](),_0x20938d=[];for(const _0x4b82aa of Object['keys'](_0x51db1e))for(const _0x1e3e90 of _0x51db1e[_0x4b82aa])'IPv4'!==_0x1e3e90['family']||_0x1e3e90['internal']||_0x20938d['push'](_0x1e3e90['address']),'IPv6'!==_0x1e3e90['family']||_0x1e3e90['internal']||_0x20938d['push'](_0x1e3e90['address']);return _0x20938d;},_0x3f095f['checkIpIsLocalhost']=function(_0x353a78){const _0x2537fd=_0x3f095f['getLocalIPs']();return!('localhost'!=_0x353a78&&'::1'!=_0x353a78&&'127.0.0.1'!=_0x353a78&&!_0x2537fd['includes'](_0x353a78));},_0x3f095f['getFs']=function(){return i;},_0x3f095f['getLocalServerJsonPath']=_0x26849b,_0x3f095f['saveCustomServerAddress']=async function(_0x1c37cd){const _0x25b9dd=await _0x26849b();let _0x243586=null;try{_0x243586=i['readJSONSync'](_0x25b9dd);}catch(_0x77c8db){}_0x243586={'ip':null==_0x243586?void 0x0:_0x243586['ip'],'port':null==_0x243586?void 0x0:_0x243586['port'],'ws':_0x1c37cd},_0x243586['ip']||delete _0x243586['ip'],_0x243586['port']||delete _0x243586['port'],i['writeFileSync'](_0x25b9dd,JSON['stringify'](_0x243586,null,0x4));};let _0x403ab6=0x0;function _0x5279f4(_0x54ba38,_0x34960d){const _0x395291=new Uint8Array(_0x54ba38['length']);for(let _0x3b6c61=0x0;_0x3b6c61<_0x54ba38['length'];_0x3b6c61++)_0x395291[_0x3b6c61]=_0x54ba38[_0x3b6c61]^_0x34960d[_0x3b6c61%_0x34960d['length']];return _0x395291;}_0x3f095f['printTime']=function(_0x4ca317,..._0x166ead){let _0x3d94c0=Date['now']();0x0==_0x403ab6||console['log'](_0x4ca317,_0x3d94c0-_0x403ab6,..._0x166ead),_0x403ab6=_0x3d94c0;},_0x3f095f['getI18nText']=function(_0x5c0a02){_0x5c0a02=_0xeb9848()+'.'+_0x5c0a02;let _0x3c1b32=Editor['I18n']['t'](_0x5c0a02);return''==_0x3c1b32&&_0x3f095f['log_1']('i18n.'+_0x5c0a02+'为空'),_0x3c1b32;},_0x3f095f['formatStr']=function(_0x5e4ef0,..._0x54320a){return _0x5e4ef0['replace'](/\{(\d+)\}/g,function(_0x63cdcc,_0x1bab62){return void 0x0!==_0x54320a[_0x1bab62]?_0x54320a[_0x1bab62]:_0x63cdcc;});},_0x3f095f['formatDate']=function(_0x1931ab,_0x55eb74){let _0x21c12b=new Date();null!=_0x55eb74&&_0x21c12b['setTime'](_0x55eb74);var _0x48e351={'M+':_0x21c12b['getMonth']()+0x1,'d+':_0x21c12b['getDate'](),'h+':_0x21c12b['getHours'](),'m+':_0x21c12b['getMinutes'](),'s+':_0x21c12b['getSeconds'](),'q+':Math['floor']((_0x21c12b['getMonth']()+0x3)/0x3),'S':_0x21c12b['getMilliseconds']()};for(var _0x186f96 in(/(y+)/['test'](_0x1931ab)&&(_0x1931ab=_0x1931ab['replace'](RegExp['$1'],(_0x21c12b['getFullYear']()+'')['substr'](0x4-RegExp['$1']['length']))),_0x48e351))new RegExp('('+_0x186f96+')')['test'](_0x1931ab)&&(_0x1931ab=_0x1931ab['replace'](RegExp['$1'],0x1==RegExp['$1']['length']?_0x48e351[_0x186f96]:('00'+_0x48e351[_0x186f96])['substr']((''+_0x48e351[_0x186f96])['length'])));return _0x1931ab;},_0x3f095f['openEvalPanel']=async function(_0x2f38fe=''){const _0x18632e=_0x3f095f['getPluginName']()+'.eval_panel';await Editor['Panel']['has'](_0x18632e)?Editor['Panel']['focus'](_0x18632e):await Editor['Panel']['open'](_0x18632e),_0x2f38fe&&Editor['Message']['request'](_0x3f095f['getPluginName'](),'setDefaultEvalStr',_0x2f38fe);},_0x3f095f['parseKey']=function(_0x2ebd81){let _0x17385b='';for(let _0x253640=0x0;_0x253640<_0x2ebd81['length'];_0x253640++){let _0x5e77d8=_0x2ebd81[_0x253640]['toString'](),_0x1e2244='';for(let _0x28202a=0x0;_0x28202a<_0x5e77d8['length'];_0x28202a++)_0x1e2244+=(0x9-parseInt(_0x5e77d8['charAt'](_0x28202a)))['toString']();_0x17385b+=parseInt(_0x1e2244)['toString'](0x10)['padStart'](0x8,'0');}return _0x17385b;},_0x3f095f['str_encrypt']=function(_0x595999,_0x1cc595){if(null==_0x1cc595)return void console['log']('key\x20不能为空');const _0xce3f68=_0x5279f4(new TextEncoder()['encode'](_0x595999),new TextEncoder()['encode'](_0x1cc595));let _0x2ee3dd='';for(let _0x8323cf=0x0;_0x8323cf<_0xce3f68['length'];_0x8323cf+=0x8000){const _0x204dda=_0xce3f68['subarray'](_0x8323cf,_0x8323cf+0x8000);_0x2ee3dd+=String['fromCharCode']['apply'](null,Array['from'](_0x204dda));}return btoa(_0x2ee3dd);},_0x3f095f['str_decrypt']=function(_0x975663,_0x40fc67){if(null==_0x40fc67)return void console['log']('key\x20不能为空');const _0x55f956=atob(_0x975663),_0x4776f5=new Uint8Array(_0x55f956['length']);for(let _0x154f1f=0x0;_0x154f1f<_0x55f956['length'];_0x154f1f+=0x8000){const _0x296be3=_0x55f956['slice'](_0x154f1f,_0x154f1f+0x8000);for(let _0x2867c7=0x0;_0x2867c7<_0x296be3['length'];_0x2867c7++)_0x4776f5[_0x154f1f+_0x2867c7]=_0x296be3['charCodeAt'](_0x2867c7);}const _0x40cd71=_0x5279f4(_0x4776f5,new TextEncoder()['encode'](_0x40fc67));return new TextDecoder()['decode'](_0x40cd71);},_0x3f095f['pako_deflate']=function(_0x5a7b52){return pako['deflate'](_0x5a7b52,{'to':'string'});},_0x3f095f['pako_inflate']=function(_0x52e9b0){return pako['inflate'](_0x52e9b0,{'to':'string'});},_0x3f095f['getStaticsInfo']=async function(){const _0x3c430f=Editor['Project']['path'];console['log']('pPath',_0x3c430f),console['log']('Editor.Project.tmpDir',Editor['Project']['tmpDir']);const _0xda7948=t['join'](Editor['Project']['path'],'settings/v2/packages/project.json'),_0x42f253=i['readJSONSync'](_0xda7948);if(console['log']('projJson',_0x42f253),null==this['_designSize']){const _0x178083='const\x20{width,height}\x20=\x20cc.view.getDesignResolutionSize();return\x20{width,height}',_0x5663e6=await this['evalJsInRuntime'](_0x178083);console['log']('执行',_0x5663e6);}},_0x3f095f['getDesignResolutionSize']=function(){var _0x22ffda,_0x921347;const _0x22e7c1=t['join'](Editor['Project']['path'],'settings/v2/packages/project.json');if(i['existsSync'](_0x22e7c1))try{const _0x3b13c0=i['readJSONSync'](_0x22e7c1);if(null==(_0x22ffda=null==_0x3b13c0?void 0x0:_0x3b13c0['general'])?void 0x0:_0x22ffda['designResolution'])return null==(_0x921347=null==_0x3b13c0?void 0x0:_0x3b13c0['general'])?void 0x0:_0x921347['designResolution'];}catch(_0x20f55a){}return null;};})(exports['_funcs']||(exports['_funcs']={})),(function(){if(null!=globalThis['pako'])return;let _0x32dabb=t['join'](exports['_funcs']['getCurPluginPath'](),'src/tools/','pako.min.js'),_0x3dfe03=i['readFileSync'](_0x32dabb,'utf-8');try{new Function(_0x3dfe03)();}catch(_0x2e0593){console['log'](_0x2e0593);}}()),exports['packageJSON']=e;