'use strict';const e={'name':'cc_debuger_realtime','version':'1.0.8','package_version':0x2,'description':'Cocos\x20real-time\x20multi-function\x20debugger','author':'hyz','author-info':{'email':'1451784145@qq.com','WeChat':'busky192','QQ\x20Group':'581563429'},'type':'module','main':'./dist/browser.cjs','scripts':{'dev':'npm\x20run\x20build\x20--\x20--mode\x20development','build':'vite\x20build','obfuscate':'node\x20plugin-tools.js','clear':'node\x20plugin-tools.js\x20isClear','install_publish':'npm\x20install\x20--production','publish':'vite\x20build\x20&&\x20node\x20plugin-tools.js'},'dependencies':{'@dagrejs/dagre':'^1.1.4','@vue-flow/core':'^1.41.7','element-plus':'^2.8.6','fs-extra':'^11.2.0','mitt':'^3.0.1','pngjs':'^7.0.0','vue':'^3.4.37','ws':'^8.18.0'},'devDependencies':{'@cocos-fe/vite-plugin-cocos-panel':'^0.0.1-beta.5','@cocos/creator-types':'^3.8.4','@types/node':'^22.10.5','@vitejs/plugin-vue':'^5.2.1','javascript-obfuscator':'^4.1.1','rollup-plugin-node-externals':'^7.1.3','terser':'^5.39.0','typescript':'^5.5.3','unplugin-auto-import':'^0.18.6','unplugin-vue-components':'^0.27.5','vite':'^5.4.1','vite-plugin-obfuscator':'^1.0.5','vue-tsc':'^2.1.10','archiver':'^7.0.1'},'contributions':{'builder':'./builder/builder.js','menu':[{'path':'i18n:menu.extension','label':'i18n:cc_debuger_realtime.menu_main','message':'open_main'}],'messages':{'open_main':{'methods':['open_main']},'restart-self':{'methods':['restart_self_ui']},'doEvalJs':{'methods':['default.doEvalJs']},'sendRuntimeLog':{'methods':['log_panel.sendRuntimeLog']},'callMainPanelFunc':{'methods':['default.callMainPanelFunc']},'onRuntimeOnlineState':{'methods':['log_panel.onRuntimeOnlineState','eval_panel.onRuntimeOnlineState','localCache_panel.onRuntimeOnlineState','dynamicTexture_panel.onRuntimeOnlineState']},'onBeforeBuild':{'methods':['onBeforeBuild']},'onAfterBuild':{'methods':['onAfterBuild']},'setDefaultEvalStr':{'methods':['eval_panel.setDefaultEvalStr']}}},'panels':{'default':{'main':'./dist/main_panel.cjs','size':{'min-width':0x258,'min-height':0x258,'width':0x3e8,'height':0x352}},'eval_panel':{'main':'./dist/eval_panel.cjs','size':{'min-width':0x320,'min-height':0x258,'width':0x4b0,'height':0x258}},'log_panel':{'main':'./dist/log_panel.cjs','size':{'min-width':0x190,'min-height':0x12c,'width':0x320,'height':0x258}},'dynamicTexture_panel':{'main':'./dist/dynamicTexture_panel.cjs','size':{'min-width':0x320,'min-height':0x320,'width':0x320,'height':0x320}},'localCache_panel':{'main':'./dist/localCache_panel.cjs','size':{'min-width':0x190,'min-height':0x1f4,'width':0x294,'height':0x320}}}},t=require('path'),n=require('net'),{exec:o,spawn:r}=require('child_process'),i=require('fs-extra'),s=require('os');exports['_funcs']=void 0x0,(_0x24574a=>{function _0x226cc4(){return e['name'];}function _0x1bcfed(){return t['join'](Editor['Project']['path'],'extensions',e['name']);}_0x24574a['getPluginName']=_0x226cc4,_0x24574a['getPluginVersionName']=function(){const _0x1b4371=_0x1bcfed()+'/version.txt';let _0x380b20=i['readFileSync'](_0x1b4371);if(_0x380b20['toString']&&(_0x380b20=_0x380b20['toString']()),'string'==typeof _0x380b20)_0x380b20=_0x380b20['trim'](),/^\d+(\.\d+)*$/['test'](_0x380b20)||(_0x380b20=e['version']);else _0x380b20=e['version'];return _0x380b20;},_0x24574a['getAssetInfoByUuid']=async function(_0x2575d8){return Editor['Message']['request']('asset-db','query-asset-info',_0x2575d8);},_0x24574a['getAssetMetaByUuid']=async function(_0x39e7ca){return Editor['Message']['request']('asset-db','query-asset-meta',_0x39e7ca);},_0x24574a['getUuidByUrl']=async function(_0x4a962a){return Editor['Message']['request']('asset-db','query-uuid',_0x4a962a);},_0x24574a['log_1']=function(..._0x27fac1){_0x27fac1['unshift']('[plugin]'),console['log']['apply'](console,_0x27fac1);},_0x24574a['getCurPluginPath']=_0x1bcfed,_0x24574a['waitForSeconds']=async function(_0x2f3e84){return new Promise(_0x21778e=>{setTimeout(()=>{_0x21778e(null);},0x3e8*_0x2f3e84);});},_0x24574a['getAllSubpathsFromUrl']=function(_0x29f957){const _0x449693=_0x29f957['replace'](/^[^:]+:\/+/,'')['split']('/'),_0x57963a=[];let _0x310c26='';for(let _0x105bea=0x0;_0x105bea<_0x449693['length'];_0x105bea++)_0x310c26=(_0x310c26?_0x310c26+'/':'')+_0x449693[_0x105bea],_0x57963a['push'](_0x310c26);return _0x57963a;},_0x24574a['getIconOfResType']=function(_0x8bab56){return'cc.SpriteFrame'===_0x8bab56||'cc.Texture2D'===_0x8bab56||'cc.ImageAsset'===_0x8bab56?'image':'cc.Prefab'===_0x8bab56?'prefab':'cc.SceneAsset'===_0x8bab56?'scene':'cc.Material'===_0x8bab56?'material':'cc.EffectAsset'===_0x8bab56?'effect':'cc.AudioClip'===_0x8bab56?'audio-clip':'cc.AnimationClip'===_0x8bab56?'animation-clip':'cc.JsonAsset'===_0x8bab56?'json':'cc.TextAsset'===_0x8bab56?'text':'cc.BitmapFont'===_0x8bab56?'bitmap-font':'cc.TTFFont'===_0x8bab56?'ttf-font':'cc.ParticleAsset'===_0x8bab56?'particle':'cc.SpriteAtlas'===_0x8bab56?'sprite-atlas':'cc.VideoClip'===_0x8bab56?'video':'cc.Mesh'===_0x8bab56?'mesh':'sp.SkeletonData'===_0x8bab56?'spine-data':'cc.AnimationClip'===_0x8bab56?'animation-clip':'unknown';},_0x24574a['getRuntimePreviewUrl']=async function(){return'http://localhost:'+await new Promise(_0xeded82=>{Editor['Message']['request']('server','query-port')['then'](_0x7af3d2=>{_0xeded82(_0x7af3d2);});})+'/';},_0x24574a['openWebSiteUrl']=function(_0x49f302){let _0x3ba81a;switch(s['platform']()){case'win32':_0x3ba81a='start\x20\x22\x22\x20\x22'+_0x49f302+'\x22';break;case'darwin':_0x3ba81a='open\x20\x22'+_0x49f302+'\x22';break;case'linux':_0x3ba81a='xdg-open\x20\x22'+_0x49f302+'\x22';break;default:return void console['error']('Unsupported\x20platform:\x20'+s['platform']());}o(_0x3ba81a,(_0x1e9c28,_0x1b70ec,_0x376bd1)=>{_0x1e9c28?console['error']('执行命令时出错:\x20'+_0x1e9c28):_0x376bd1&&console['error']('标准错误输出:\x20'+_0x376bd1);});},_0x24574a['waitForElementMounted']=async function(_0x4d91a6,_0xac5fd6=0x64,_0x5f5a1a=0x32){return _0x4d91a6['value']?_0x4d91a6['value']:new Promise(function(_0xcd00b7,_0x5e5204){let _0x1bf6de=0x0;const _0x1c5af2=setInterval(()=>{_0x4d91a6['value']?(_0xcd00b7(_0x4d91a6['value']),clearInterval(_0x1c5af2)):_0x1bf6de>=_0x5f5a1a?clearInterval(_0x1c5af2):_0x1bf6de++;},_0xac5fd6);});},_0x24574a['clamp']=function(_0x51993c,_0x25fdbd,_0x594ccb){if(_0x51993c>_0x25fdbd)throw new Error('min\x20should\x20be\x20less\x20than\x20or\x20equal\x20to\x20max');return Math['min'](Math['max'](_0x594ccb,_0x51993c),_0x25fdbd);};const _0x2bf4ad=[];async function _0x102329(_0x203e30){try{return await i['ensureDir'](_0x203e30),_0x203e30;}catch(_0x11911c){return console['error']('操作文件夹时出错:\x20'+_0x11911c['message']),null;}}async function _0x4e783c(){const _0x5da8b8=_0x1bcfed()+'/cache',_0x31cc19=_0x5da8b8+'/localServer.json';return await _0x102329(_0x5da8b8),_0x31cc19;}_0x24574a['runCmdSpawn']=function(_0x3efc38,_0x31cb8f,_0x571fa3){return new Promise((_0xc77138,_0x40b2e5)=>{const _0x5ce327=r(_0x3efc38,_0x31cb8f,{'shell':!0x0,..._0x571fa3});_0x2bf4ad['push'](_0x5ce327),_0x5ce327['stdout']['on']('data',_0x4c5a17=>{console['log']('[runCmdSpawn]:\x20'+_0x4c5a17['toString']()['trim']());}),_0x5ce327['stderr']['on']('data',_0x9d81e2=>{console['error']('[runCmdSpawn\x20Error]:\x20'+_0x9d81e2['toString']()['trim']());}),_0x5ce327['on']('error',_0x1a1c23=>{console['error']('[runCmdSpawn\x20Error]',_0x1a1c23),_0xc77138();}),_0x5ce327['on']('exit',_0x44f468=>{_0x2bf4ad['splice'](_0x2bf4ad['indexOf'](_0x5ce327),0x1),console['log']('[runCmdSpawn]\x20Process\x20exited\x20with\x20code\x20'+_0x44f468),_0xc77138();});});},_0x24574a['stopSpawnProcess']=function(){for(let _0x10dde1 of _0x2bf4ad)_0x10dde1['kill']();_0x2bf4ad['length']=0x0;},_0x24574a['rgbaToHex']=function(_0xfb2d3b,_0x516ba3,_0x173a6f,_0x1c5c03){const _0x8e0b07=_0x1661be=>{const _0x55d23e=_0x1661be['toString'](0x10);return 0x1===_0x55d23e['length']?'0'+_0x55d23e:_0x55d23e;};return'#'+_0x8e0b07(_0xfb2d3b)+_0x8e0b07(_0x516ba3)+_0x8e0b07(_0x173a6f)+_0x8e0b07(_0x1c5c03);},_0x24574a['findAvailablePort']=function _0x5a6f82(_0x41fd59){return new Promise((_0x265513,_0x30378d)=>{const _0x1a0aa2=n['createServer']();_0x1a0aa2['unref'](),_0x1a0aa2['on']('error',()=>{_0x265513(_0x5a6f82(_0x41fd59+0x1));}),_0x1a0aa2['listen'](_0x41fd59,()=>{const _0xca294b=_0x1a0aa2['address']()['port'];_0x1a0aa2['close'](()=>_0x265513(_0xca294b));});});},_0x24574a['roundNumbersToPrecision']=function _0x470173(_0x3576c2,_0x464ef5=0x2){return null===_0x3576c2||'object'!=typeof _0x3576c2?'number'==typeof _0x3576c2?Number(_0x3576c2['toFixed'](_0x464ef5)):_0x3576c2:Array['isArray'](_0x3576c2)?_0x3576c2['map'](_0x3bab9a=>_0x470173(_0x3bab9a,_0x464ef5)):Object['keys'](_0x3576c2)['reduce']((_0x5ef63c,_0x40b322)=>{const _0x5e4b42=_0x3576c2[_0x40b322];return _0x5ef63c[_0x40b322]='number'==typeof _0x5e4b42?Number(_0x5e4b42['toFixed'](_0x464ef5)):'object'==typeof _0x5e4b42&&null!==_0x5e4b42?_0x470173(_0x5e4b42,_0x464ef5):_0x5e4b42,_0x5ef63c;},{});},_0x24574a['checkMouseIsInElemen']=function(_0x5df022,_0x42a1a7){const _0x5ea5e6=_0x5df022['getBoundingClientRect']();return _0x42a1a7['clientX']>_0x5ea5e6['x']&&_0x42a1a7['clientX']<_0x5ea5e6['x']+_0x5ea5e6['width']&&_0x42a1a7['clientY']>_0x5ea5e6['y']&&_0x42a1a7['clientY']<_0x5ea5e6['y']+_0x5ea5e6['height'];},_0x24574a['registerF5']=function(){window['addEventListener']('keyup',_0x441562=>{'F5'==_0x441562['key']&&Editor['Message']['send'](_0x24574a['getPluginName'](),'restart-self');});},_0x24574a['isValidURL']=function(_0x54f339){return new RegExp('^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\x5cS+(?::\x5cS*)?@)?(?:(?:(?:[1-9]\x5cd?|1\x5cd\x5cd|2[01]\x5cd|22[0-3])(?:\x5c.(?:1?\x5cd{1,2}|2[0-4]\x5cd|25[0-5])){2}(?:\x5c.(?:[0-9]\x5cd?|1\x5cd\x5cd|2[0-4]\x5cd|25[0-4]))|(?:(?:[a-z\x5cu00a1-\x5cuffff0-9]+-?)*[a-z\x5cu00a1-\x5cuffff0-9]+)(?:\x5c.(?:[a-z\x5cu00a1-\x5cuffff0-9]+-?)*[a-z\x5cu00a1-\x5cuffff0-9]+)*(?:\x5c.(?:[a-z\x5cu00a1-\x5cuffff]{2,})))|localhost)(?::\x5cd{2,5})?(?:(/|\x5c?|#)[^\x5cs]*)?$','i')['test'](_0x54f339);},_0x24574a['ensureFloderExist']=_0x102329,_0x24574a['getLocalIpv4IP']=function(){const _0x1119b2=s['networkInterfaces']();for(const _0x4ca3b1 in _0x1119b2){const _0x3d45af=_0x1119b2[_0x4ca3b1];for(const _0x4363f4 of _0x3d45af)if('IPv4'===_0x4363f4['family']&&!_0x4363f4['internal'])return _0x4363f4['address'];}return'未找到\x20IP\x20地址';},_0x24574a['getLocalIPs']=function(){const _0x49a936=s['networkInterfaces'](),_0x2536d0=[];for(const _0x22e8c0 of Object['keys'](_0x49a936))for(const _0x1b1606 of _0x49a936[_0x22e8c0])'IPv4'!==_0x1b1606['family']||_0x1b1606['internal']||_0x2536d0['push'](_0x1b1606['address']),'IPv6'!==_0x1b1606['family']||_0x1b1606['internal']||_0x2536d0['push'](_0x1b1606['address']);return _0x2536d0;},_0x24574a['checkIpIsLocalhost']=function(_0xe26273){const _0x7fb495=_0x24574a['getLocalIPs']();return!('localhost'!=_0xe26273&&'::1'!=_0xe26273&&'127.0.0.1'!=_0xe26273&&!_0x7fb495['includes'](_0xe26273));},_0x24574a['getFs']=function(){return i;},_0x24574a['getLocalServerJsonPath']=_0x4e783c,_0x24574a['saveCustomServerAddress']=async function(_0x150ede){const _0x295170=await _0x4e783c();let _0x299501=null;try{_0x299501=i['readJSONSync'](_0x295170);}catch(_0x333e9f){}_0x299501={'ip':null==_0x299501?void 0x0:_0x299501['ip'],'port':null==_0x299501?void 0x0:_0x299501['port'],'ws':_0x150ede},_0x299501['ip']||delete _0x299501['ip'],_0x299501['port']||delete _0x299501['port'],i['writeFileSync'](_0x295170,JSON['stringify'](_0x299501,null,0x4));};let _0x3c31fe=0x0;function _0x4f8490(_0x48bffd,_0x49aedb){const _0x45876e=new Uint8Array(_0x48bffd['length']);for(let _0x284a9d=0x0;_0x284a9d<_0x48bffd['length'];_0x284a9d++)_0x45876e[_0x284a9d]=_0x48bffd[_0x284a9d]^_0x49aedb[_0x284a9d%_0x49aedb['length']];return _0x45876e;}_0x24574a['printTime']=function(_0x30efe0,..._0x195528){let _0x474c6b=Date['now']();0x0==_0x3c31fe||console['log'](_0x30efe0,_0x474c6b-_0x3c31fe,..._0x195528),_0x3c31fe=_0x474c6b;},_0x24574a['getI18nText']=function(_0x4bf593){_0x4bf593=_0x226cc4()+'.'+_0x4bf593;let _0x297ca3=Editor['I18n']['t'](_0x4bf593);return''==_0x297ca3&&_0x24574a['log_1']('i18n.'+_0x4bf593+'为空'),_0x297ca3;},_0x24574a['formatStr']=function(_0x36ede1,..._0x5c2124){return _0x36ede1['replace'](/\{(\d+)\}/g,function(_0x5db661,_0x2b6c5f){return void 0x0!==_0x5c2124[_0x2b6c5f]?_0x5c2124[_0x2b6c5f]:_0x5db661;});},_0x24574a['formatDate']=function(_0x13d114,_0xb992a2){let _0x4f37a7=new Date();null!=_0xb992a2&&_0x4f37a7['setTime'](_0xb992a2);var _0x4355e9={'M+':_0x4f37a7['getMonth']()+0x1,'d+':_0x4f37a7['getDate'](),'h+':_0x4f37a7['getHours'](),'m+':_0x4f37a7['getMinutes'](),'s+':_0x4f37a7['getSeconds'](),'q+':Math['floor']((_0x4f37a7['getMonth']()+0x3)/0x3),'S':_0x4f37a7['getMilliseconds']()};for(var _0x172945 in(/(y+)/['test'](_0x13d114)&&(_0x13d114=_0x13d114['replace'](RegExp['$1'],(_0x4f37a7['getFullYear']()+'')['substr'](0x4-RegExp['$1']['length']))),_0x4355e9))new RegExp('('+_0x172945+')')['test'](_0x13d114)&&(_0x13d114=_0x13d114['replace'](RegExp['$1'],0x1==RegExp['$1']['length']?_0x4355e9[_0x172945]:('00'+_0x4355e9[_0x172945])['substr']((''+_0x4355e9[_0x172945])['length'])));return _0x13d114;},_0x24574a['openEvalPanel']=async function(_0x54abb8=''){const _0x2bafaf=_0x24574a['getPluginName']()+'.eval_panel';await Editor['Panel']['has'](_0x2bafaf)?Editor['Panel']['focus'](_0x2bafaf):await Editor['Panel']['open'](_0x2bafaf),_0x54abb8&&Editor['Message']['request'](_0x24574a['getPluginName'](),'setDefaultEvalStr',_0x54abb8);},_0x24574a['parseKey']=function(_0x11adfe){let _0x467248='';for(let _0x3d317b=0x0;_0x3d317b<_0x11adfe['length'];_0x3d317b++){let _0x11e5d9=_0x11adfe[_0x3d317b]['toString'](),_0x5cd5ed='';for(let _0x1dc161=0x0;_0x1dc161<_0x11e5d9['length'];_0x1dc161++)_0x5cd5ed+=(0x9-parseInt(_0x11e5d9['charAt'](_0x1dc161)))['toString']();_0x467248+=parseInt(_0x5cd5ed)['toString'](0x10)['padStart'](0x8,'0');}return _0x467248;},_0x24574a['str_encrypt']=function(_0x46d66d,_0x215016){if(null==_0x215016)return void console['log']('key\x20不能为空');const _0x3a5bd1=_0x4f8490(new TextEncoder()['encode'](_0x46d66d),new TextEncoder()['encode'](_0x215016));let _0x4f5f09='';for(let _0x728340=0x0;_0x728340<_0x3a5bd1['length'];_0x728340+=0x8000){const _0x448f86=_0x3a5bd1['subarray'](_0x728340,_0x728340+0x8000);_0x4f5f09+=String['fromCharCode']['apply'](null,Array['from'](_0x448f86));}return btoa(_0x4f5f09);},_0x24574a['str_decrypt']=function(_0x305922,_0x1d8b53){if(null==_0x1d8b53)return void console['log']('key\x20不能为空');const _0x20a77b=atob(_0x305922),_0x33591e=new Uint8Array(_0x20a77b['length']);for(let _0x3b121a=0x0;_0x3b121a<_0x20a77b['length'];_0x3b121a+=0x8000){const _0x4261d0=_0x20a77b['slice'](_0x3b121a,_0x3b121a+0x8000);for(let _0x3261df=0x0;_0x3261df<_0x4261d0['length'];_0x3261df++)_0x33591e[_0x3b121a+_0x3261df]=_0x4261d0['charCodeAt'](_0x3261df);}const _0x57f4d3=_0x4f8490(_0x33591e,new TextEncoder()['encode'](_0x1d8b53));return new TextDecoder()['decode'](_0x57f4d3);},_0x24574a['pako_deflate']=function(_0x8e36fa){return pako['deflate'](_0x8e36fa,{'to':'string'});},_0x24574a['pako_inflate']=function(_0x4ca67b){return pako['inflate'](_0x4ca67b,{'to':'string'});},_0x24574a['getStaticsInfo']=async function(){const _0x313fa0=Editor['Project']['path'];console['log']('pPath',_0x313fa0),console['log']('Editor.Project.tmpDir',Editor['Project']['tmpDir']);const _0x37a195=t['join'](Editor['Project']['path'],'settings/v2/packages/project.json'),_0x2dd377=i['readJSONSync'](_0x37a195);if(console['log']('projJson',_0x2dd377),null==this['_designSize']){const _0x514686='const\x20{width,height}\x20=\x20cc.view.getDesignResolutionSize();return\x20{width,height}',_0x3f724b=await this['evalJsInRuntime'](_0x514686);console['log']('执行',_0x3f724b);}},_0x24574a['getDesignResolutionSize']=function(){var _0x42b179,_0x33cc82;const _0x13368d=t['join'](Editor['Project']['path'],'settings/v2/packages/project.json');if(i['existsSync'](_0x13368d))try{const _0x3f0e5d=i['readJSONSync'](_0x13368d);if(null==(_0x42b179=null==_0x3f0e5d?void 0x0:_0x3f0e5d['general'])?void 0x0:_0x42b179['designResolution'])return null==(_0x33cc82=null==_0x3f0e5d?void 0x0:_0x3f0e5d['general'])?void 0x0:_0x33cc82['designResolution'];}catch(_0xfb1b3d){}return null;};})(exports['_funcs']||(exports['_funcs']={})),(function(){if(null!=globalThis['pako'])return;let _0x9b7eb6=t['join'](exports['_funcs']['getCurPluginPath'](),'src/tools/','pako.min.js'),_0x4df8db=i['readFileSync'](_0x9b7eb6,'utf-8');try{new Function(_0x4df8db)();}catch(_0x2af5ef){console['log'](_0x2af5ef);}}()),exports['packageJSON']=e;